<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
          integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
          crossorigin=""/>
    <link rel="stylesheet" href="/././custom styles.css">
    <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
            integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
            crossorigin=""></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="/././async routes.js"></script>
    <title><%= title %></title>
</head>
<body>
<script>
    let timer;
    let timerStart;
    var timeSpentOnSite = getTimeSpentOnSite();

    function getTimeSpentOnSite() {
        timeSpentOnSite = parseInt(localStorage.getItem('timeSpentOnSite'));
        timeSpentOnSite = isNaN(timeSpentOnSite) ? 0 : timeSpentOnSite;
        return timeSpentOnSite;
    }

    function startCounting() {
        timerStart = Date.now();
        timer = setInterval(function () {
            timeSpentOnSite = getTimeSpentOnSite() + (Date.now() - timerStart);
            localStorage.setItem('timeSpentOnSite', timeSpentOnSite);
            timerStart = parseInt(Date.now());
            timeSpentOnSite = parseInt(timeSpentOnSite / 1000);
        }, 1000);
    }

    startCounting();

    $(window).unload(function(){
        localStorage.clear();
    });
</script>
<div class="container mt-3">